# Historical Support Scripts
The historical support scripts can be utilized to write, delete, and retrieve parsed historical unusual options activity data.

## Quick Links
- [Requirements](#requirements)
- [Scripts](#scripts)
  - [Delete Historical](#delete-historical)
  - [Get Historical](#get-historical)
  - [Write Historical](#write-historical)

----------------------------------

## Requirements
- PowerShell 7.2.0 (or higher)

----------------------------------

## Scripts
### **Delete Historical**
The ***delete-historical.ps1*** script can be utilized to delete all the data within the historical collection in the database.  At the moment the script can't be utilized to delete a select time range of parsed historical unusual options activity data.
- Navigate to the parent level ***Cue*** directory
- Open the ***.env*** file and modify the following environment variable
  - **HISTORICAL_PROXY_ENDPOINT**=***The historical proxy endpoint. Ex. http://localhost:3001/historical***
- In a PowerShell console execute the following command
  - `.\delete-historical.ps1`

### **Get Historical**
The ***get-historical.ps1*** script can be utilized to get all the parsed historical unusual options activity data or a select datetime range.  The retrieved data will be saved onto the location provided by the ***GET_HISTORICAL_OUTPUT*** environment variable.
- Open the ***.env*** file and modify the following environment variables
  - **HISTORICAL_PROXY_ENDPOINT**=***The historical proxy endpoint. Ex. http://localhost:3001/historical***
  - **GET_HISTORICAL_START**=***The historical retrieval start time in seconds. Ex. 1641479400. This is only required if requesting a datetime range instead of the entire dataset***
  - **GET_HISTORICAL_STOP**=***The historical retrieval stop time in seconds. Ex. 1641504600. This is only required if requesting a datetime range instead of the entire dataset***
  - **GET_HISTORICAL_OUTPUT**=***The location to store the retrieved parsed unusual options activity data. Ex. C:\Cue\data\options-recap\historical\csv***
- In a PowerShell console execute the following command
  - `.\get-historical.ps1`

### **Write Historical**
The ***write-historical.ps1*** script can be utilized parse and write unusual options activity data provided by Unusual Whales into the database.
- Open the ***.env*** file and modify the following environment variables
  - **HISTORICAL_PROXY_ENDPOINT**=***The historical proxy endpoint. Ex. http://localhost:3001/historical***
  - **WRITE_HISTORICAL_FILE**=***The csv or json filename to utilize without the extension.  If providing a csv, the csv will be parsed to create a json file.  If providing a json file, the json will be used as it.  Only use the json files generated by the script. Ex. 2022-01-06***
  - **WRITE_HISTORICAL_INPUT**=***The directory of the input csv file. Ex. C:\Cue\data\historical-alerts\input***
  - **WRITE_HISTORICAL_OUTPUT**=***The directory of the output json file. Ex. C:\Cue\data\historical-alerts\output***
- In a PowerShell console execute the following command
  - `.\write-historical.ps1`